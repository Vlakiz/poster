<div id="<%= dom_id comment %>" class="card rounded-5 overflow-hidden comment-block border-0">
  <turbo-frame id="<%= dom_id comment %>_frame" data-controller="turbo-frame">
    <div class="card-header d-flex py-0 border-0 bg-white">
      <div class="col-10 d-flex align-items-center text-truncate">
        <div class="comment-avatar me-2">
          <%= avatar comment.user, class_name: 'img-xs rounded-circle' %>
        </div>
        <div class="fw-semibold text-truncate">
          <%= link_to nickname(comment.user), comment.user,
            class: "nav-link text-truncate",
            title: nickname(comment.user),
            data: { turbo_frame: "_top" }
          %>
        </div>
        <span class="text-secondary mx-2">
          â€¢
        </span>
        <small class="text-body-secondary">
          <%= time_ago_in_words comment.created_at %> ago
        </small>
      </div>
      <div class="col-2 text-end">
        <% if comment.user == current_user %>
          <div class="comment-controls">
            <div class="d-inline me-2">
              <%= link_to edit_post_comment_path(comment.post, comment),
                class: "nav-link edit-comment d-inline",
                data: {
                    turbo_frame: "#{dom_id comment}_frame",
                    action: 'click->turbo-frame#addSpinnerToLink'
                } do
              %>
                <i class="bi bi-pen"></i>
              <% end %>
            </div>
            <%= link_to post_comment_path(comment.post, comment),
              class: "nav-link d-inline",
              data: {
                turbo_method: :delete,
                turbo_frame: "_top",
                action: 'click->turbo-frame#addSpinnerToLink'
              } do
            %>
              <i class="bi bi-trash3"></i>
            <% end %>
          </div>
        <% end %>
      </div>
    </div>
    <div class="card-body comment-body py-2">
      <%= simple_format(comment.body) %>
      <% if modified?(comment) %>
        <div class="position-absolute bottom-0 end-0 translate-middle text-body-tertiary">
          <sub>Edited</sub>
        </div>
      <% end %>
    </div>
    <div class="card-footer text-body-secondary border-0 bg-white pt-1">
      <div class="d-inline-block me-3">
        <%= render 'shared/like', post: comment.post, comment: comment %>
      </div>
      <span class="replies-count">
        <i class="bi bi-reply-fill"></i>
        <%= comment.replies_count %>
      </span>
    </div>
  </turbo-frame>
</div>
